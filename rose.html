<!DOCTYPE html>
<html>
<head>
  <title>Sitelet | Rose</title>
  <script type="text/javascript" src="http://www.shinyatk.com/paper.js"></script>
  <script type="text/paperscript" canvas="canvas">
    var totalHeight = view.size.height;
    var totalWidth = view.size.width;
    var dotRadius = 15;
    var margin = 100;

    var rectLayer = project.activeLayer;
    var dotLayer = new paper.Layer();
    var roseLayer = new paper.Layer();

    rectLayer.activate();
    var rect = new Path.Rectangle({
        point: [0, 0],
        size: [view.size.width, view.size.height]
    });
    rect.sendToBack();
    rect.fillColor = '#FFF8CC';

    dotLayer.activate();
    var path = new Path.Circle({
      center: [0, 0],
      radius: dotRadius,
    });
    var dotColor = "#FFEB99"

    var currentHeight = -margin*1.5;
    var heightCount = 0;
    var currentWidth = -margin;
    var widthCount = 0;

    while (currentHeight < totalHeight + margin) {

      var y = -margin + heightCount*margin;

      while (currentWidth < totalWidth + margin) {

        var x;
        if (heightCount%2 == 0) {
          x = -margin + widthCount*margin;
        } else {
          x = -margin + widthCount*margin + (margin/2);
        }

        var centerPoint = new Point(x, y);
        var circle = path.clone();
        circle.position = centerPoint;
        circle.fillColor = dotColor;

        widthCount ++;
        currentWidth += margin;
      }
      widthCount = 0;
      currentWidth = -margin;
      heightCount ++;
      currentHeight += margin;
    }

    function onMouseMove(event) {
        var edx, edy = null;

        (event.delta.x < 400 )? edx = event.delta.x : 400;
        (event.delta.y < 400 )? edy = event.delta.y : 400;

        //move top layer the most
        var xTop = edx/400 * 25;
        var yTop = edy/400 * 25;
        dotLayer.translate(xTop,yTop);

        // //middle one bit less
        // var xMid = edx/400 * 25;
        // var yMid = edy/400 * 25;
        // midLayer.translate(xMid,yMid);
        //
        // //and the bottom one - just a bit
        // var xBottom = edx/400 * 12;
        // var yBottom = edy/400 * 12;
        // bottomLayer.translate(xBottom,yBottom);

    }
    // function onFrame(event) {
    //   for (var i = 0; i < circles.length; i++) {
    //       var circle = circles[i];
    //       circle.fillColor.hue += 1;
    //   }
    // }
    // function onResize(event) {
    //
    // }
  </script>
</head>
<body style="padding: 0; margin: 0;">
  <canvas id="canvas" resize></canvas>
</body>
</html>
